{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Resumen del proyecto WatermelonD","text":""},{"location":"#estructura-del-proyecto","title":"Estructura del Proyecto","text":"<pre><code>WatermelonD/\n\u251c\u2500\u2500 ROADMAP.md\n\u251c\u2500\u2500 walkthrough.md\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 install.sh\n\u251c\u2500\u2500 start.sh\n\u251c\u2500\u2500 resumen.md\n\u251c\u2500\u2500 NeoCore.py\n\u251c\u2500\u2500 source/\n\u2502   \u251c\u2500\u2500 conf.py\n\u2502   \u2514\u2500\u2500 training_data/\n\u251c\u2500\u2500 resources/\n\u2502   \u251c\u2500\u2500 Blue/\n\u2502   \u2502   \u251c\u2500\u2500 bro_bridge.py\n\u2502   \u2502   \u251c\u2500\u2500 install_nb.sh\n\u2502   \u2502   \u251c\u2500\u2500 README.md\n\u2502   \u2502   \u251c\u2500\u2500 bro_agent.py\n\u2502   \u2502   \u251c\u2500\u2500 test_simulation.py\n\u2502   \u2502   \u251c\u2500\u2500 esp32_cam/\n\u2502   \u2502   \u251c\u2500\u2500 MNB/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 README.md\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 ESP32/\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 main.py\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 boot.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 PiZero/\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 agent.py\n\u2502   \u2502   \u2514\u2500\u2500 experiments/\n\u2502   \u2502       \u251c\u2500\u2500 whatsapp_to_json.py\n\u2502   \u2502       \u251c\u2500\u2500 README.md\n\u2502   \u2502       \u251c\u2500\u2500 ingest_conversations.py\n\u2502   \u2502       \u251c\u2500\u2500 finetune_tio.py\n\u2502   \u2502       \u251c\u2500\u2500 merge_lora.py\n\u2502   \u2502       \u2514\u2500\u2500 txt_to_json.py\n\u2502   \u251c\u2500\u2500 tests/\n\u2502   \u2502   \u251c\u2500\u2500 test_sysadmin.py\n\u2502   \u2502   \u251c\u2500\u2500 test_fuzzy_logic.py\n\u2502   \u2502   \u251c\u2500\u2500 test_cortex.py\n\u2502   \u2502   \u251c\u2500\u2500 test_brain.py\n\u2502   \u2502   \u251c\u2500\u2500 test_sherlock.py\n\u2502   \u2502   \u251c\u2500\u2500 test_knowledge_graph.py\n\u2502   \u2502   \u251c\u2500\u2500 test_sentiment.py\n\u2502   \u2502   \u251c\u2500\u2500 test_memory.py\n\u2502   \u2502   \u251c\u2500\u2500 test_speaker_config.py\n\u2502   \u2502   \u2514\u2500\u2500 test_perf_cortex.py\n\u2502   \u2514\u2500\u2500 tools/\n\u2502       \u251c\u2500\u2500 download_model.py\n\u2502       \u251c\u2500\u2500 test_conversation_flow.py\n\u2502       \u251c\u2500\u2500 download_vosk_model.py\n\u2502       \u251c\u2500\u2500 analyze_code.py\n\u2502       \u251c\u2500\u2500 check_neocore.py\n\u2502       \u251c\u2500\u2500 start_face.sh\n\u2502       \u251c\u2500\u2500 install_piper.py\n\u2502       \u251c\u2500\u2500 optimize_whisper.py\n\u2502       \u251c\u2500\u2500 train_chat.py\n\u2502       \u251c\u2500\u2500 seed_knowledge.py\n\u2502       \u251c\u2500\u2500 migrate_db.py\n\u2502       \u2514\u2500\u2500 download_big_model.py\n\u251c\u2500\u2500 config/\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 wifi_manager.py\n\u2502   \u251c\u2500\u2500 chat.py\n\u2502   \u251c\u2500\u2500 dashboard_data.py\n\u2502   \u251c\u2500\u2500 sherlock.py\n\u2502   \u251c\u2500\u2500 calendar.py\n\u2502   \u251c\u2500\u2500 web_admin.py\n\u2502   \u251c\u2500\u2500 cast_manager.py\n\u2502   \u251c\u2500\u2500 vision.py\n\u2502   \u251c\u2500\u2500 intent_manager.py\n\u2502   \u251c\u2500\u2500 file_manager.py\n\u2502   \u251c\u2500\u2500 utils.py\n\u2502   \u251c\u2500\u2500 config_manager.py\n\u2502   \u251c\u2500\u2500 sentiment.py\n\u2502   \u251c\u2500\u2500 reminders.py\n\u2502   \u251c\u2500\u2500 voice_manager.py\n\u2502   \u251c\u2500\u2500 ssh_manager.py\n\u2502   \u251c\u2500\u2500 ai_engine.py\n\u2502   \u251c\u2500\u2500 alarms.py\n\u2502   \u251c\u2500\u2500 guard.py\n\u2502   \u251c\u2500\u2500 database.py\n\u2502   \u251c\u2500\u2500 logger.py\n\u2502   \u251c\u2500\u2500 brain.py\n\u2502   \u251c\u2500\u2500 speaker.py\n\u2502   \u251c\u2500\u2500 network.py\n\u2502   \u251c\u2500\u2500 date_parser.py\n\u2502   \u251c\u2500\u2500 sysadmin.py\n\u2502   \u2514\u2500\u2500 skills/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 system.py\n\u2502       \u251c\u2500\u2500 ssh.py\n\u2502       \u251c\u2500\u2500 content.py\n\u2502       \u251c\u2500\u2500 time_date.py\n\u2502       \u251c\u2500\u2500 media.py\n\u2502       \u251c\u2500\u2500 organizer.py\n\u2502       \u251c\u2500\u2500 network.py\n\u2502       \u2514\u2500\u2500 files.py\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 whisper_manual.md\n\u2502   \u251c\u2500\u2500 atackdb.md\n\u2502   \u251c\u2500\u2500 changelog.md\n\u2502   \u251c\u2500\u2500 tio_personality.md\n\u2502   \u251c\u2500\u2500 install_fedora.md\n\u2502   \u251c\u2500\u2500 all.md\n\u2502   \u251c\u2500\u2500 train.md\n\u2502   \u251c\u2500\u2500 brain.md\n\u2502   \u251c\u2500\u2500 info.md\n\u2502   \u2514\u2500\u2500 refactorizar.md\n\u251c\u2500\u2500 database/\n\u2502   \u2514\u2500\u2500 init_db.py\n\u2514\u2500\u2500 web/\n    \u2514\u2500\u2500 static/\n        \u251c\u2500\u2500 css/\n        \u251c\u2500\u2500 js/\n        \u2514\u2500\u2500 templates/\n</code></pre>"},{"location":"#estadisticas-generales","title":"Estad\u00edsticas Generales","text":"<ul> <li>Total L\u00edneas de C\u00f3digo: 7217</li> <li>Total Clases: 39</li> <li>Total Funciones: 330</li> <li>Total Asignaciones de Variables (Aprox): 1542</li> <li>Total TODOs/FIXMEs: 1</li> </ul>"},{"location":"#dependencias-requirementstxt","title":"Dependencias (requirements.txt)","text":"<ul> <li>python-vlc</li> <li>numpy</li> <li>vosk</li> <li>psutil</li> <li>pyaudio</li> <li>rapidfuzz</li> <li>scikit-learn</li> <li>dateparser</li> <li>flask</li> <li>paramiko</li> <li>cryptography</li> <li>flask-socketio</li> <li>eventlet</li> <li>face_recognition</li> <li>opencv-python</li> <li>llama-cpp-python</li> <li>huggingface-hub</li> <li>pychromecast</li> </ul>"},{"location":"#tareas-pendientes-todosfixmes","title":"Tareas Pendientes (TODOs/FIXMEs)","text":"<ul> <li>[resources/tools/analyze_code.py] \"todos\": [line.strip() for line in lines if \"# TODO\" in line or \"# FIXME\" in line]</li> </ul>"},{"location":"#detalle-por-archivo","title":"Detalle por Archivo","text":""},{"location":"#neocorepy","title":"NeoCore.py","text":"<ul> <li>L\u00edneas: 486</li> <li>Clases: 1</li> <li><code>class NeoCore</code></li> <li>Funciones: 18</li> <li><code>def __init__</code></li> <li><code>def on_vision_event</code></li> <li><code>def speak</code></li> <li><code>def setup_vlc</code></li> <li><code>def on_closing</code></li> <li><code>def start_background_tasks</code></li> <li><code>def on_voice_command</code></li> <li><code>def handle_command</code></li> <li><code>def handle_unrecognized_command</code></li> <li><code>def process_event_queue</code></li> <li><code>def proactive_update_loop</code></li> <li><code>def _check_frequent_tasks</code></li> <li><code>def check_calendar_events</code></li> <li><code>def execute_action</code></li> <li><code>def action_responder_simple</code></li> <li><code>def action_consultar_citas</code></li> <li><code>def give_morning_summary</code></li> <li><code>def handle_learning_response</code></li> <li>Variables (Est.): 105</li> </ul>"},{"location":"#modulesdatabasepy","title":"modules/database.py","text":"<ul> <li>L\u00edneas: 478</li> <li>Clases: 1</li> <li><code>class DatabaseManager</code></li> <li>Funciones: 27</li> <li><code>def __init__</code></li> <li><code>def get_connection</code></li> <li><code>def init_db</code></li> <li><code>def log_interaction</code></li> <li><code>def get_recent_interactions</code></li> <li><code>def add_fact</code></li> <li><code>def get_fact</code></li> <li><code>def search_facts</code></li> <li><code>def add_alias</code></li> <li><code>def get_alias</code></li> <li><code>def get_all_aliases</code></li> <li><code>def log_event</code></li> <li><code>def get_recent_events</code></li> <li><code>def search_memories</code></li> <li><code>def update_concept</code></li> <li><code>def get_concept</code></li> <li><code>def get_top_concepts</code></li> <li><code>def add_relation</code></li> <li><code>def get_related_concepts</code></li> <li><code>def get_path</code></li> <li><code>def infer_problems</code></li> <li><code>def log_surprise</code></li> <li><code>def get_recent_surprises</code></li> <li><code>def get_interactions_by_date</code></li> <li><code>def add_daily_summary</code></li> <li><code>def get_daily_summary</code></li> <li><code>def close</code></li> <li>Variables (Est.): 77</li> </ul>"},{"location":"#modulesweb_adminpy","title":"modules/web_admin.py","text":"<ul> <li>L\u00edneas: 439</li> <li>Clases: 0</li> <li>Funciones: 38</li> <li><code>def login_required</code></li> <li><code>def wrapped_view</code></li> <li><code>def index</code></li> <li><code>def login</code></li> <li><code>def logout</code></li> <li><code>def dashboard</code></li> <li><code>def services</code></li> <li><code>def network</code></li> <li><code>def actions</code></li> <li><code>def terminal</code></li> <li><code>def logs</code></li> <li><code>def speech</code></li> <li><code>def settings</code></li> <li><code>def ssh_page</code></li> <li><code>def explorer</code></li> <li><code>def knowledge</code></li> <li><code>def face</code></li> <li><code>def update_face</code></li> <li><code>def restart_system</code></li> <li><code>def api_stats</code></li> <li><code>def api_logs</code></li> <li><code>def api_speech_history</code></li> <li><code>def api_services</code></li> <li><code>def api_control_service</code></li> <li><code>def api_network</code></li> <li><code>def api_wifi_scan</code></li> <li><code>def api_wifi_connect</code></li> <li><code>def api_dashboard_data</code></li> <li><code>def api_terminal</code></li> <li><code>def api_terminal_complete</code></li> <li><code>def api_actions</code></li> <li><code>def api_ssh_list</code></li> <li><code>def api_ssh_add</code></li> <li><code>def api_ssh_delete</code></li> <li><code>def api_files_list</code></li> <li><code>def api_files_read</code></li> <li><code>def api_files_save</code></li> <li><code>def run_server</code></li> <li>Variables (Est.): 103</li> </ul>"},{"location":"#installsh","title":"install.sh","text":"<ul> <li>L\u00edneas: 250</li> <li>Clases: 0</li> <li>Funciones: 0</li> <li>Variables (Est.): 29</li> </ul>"},{"location":"#modulessysadminpy","title":"modules/sysadmin.py","text":"<ul> <li>L\u00edneas: 194</li> <li>Clases: 1</li> <li><code>class SysAdminManager</code></li> <li>Funciones: 10</li> <li><code>def __init__</code></li> <li><code>def get_cpu_temp</code></li> <li><code>def get_disk_usage</code></li> <li><code>def get_ram_usage</code></li> <li><code>def get_full_status</code></li> <li><code>def get_services</code></li> <li><code>def control_service</code></li> <li><code>def get_network_info</code></li> <li><code>def run_command</code></li> <li><code>def get_file_completions</code></li> <li>Variables (Est.): 31</li> </ul>"},{"location":"#modulesbrainpy","title":"modules/brain.py","text":"<ul> <li>L\u00edneas: 183</li> <li>Clases: 1</li> <li><code>class Brain</code></li> <li>Funciones: 10</li> <li><code>def __init__</code></li> <li><code>def set_ai_engine</code></li> <li><code>def process_input</code></li> <li><code>def learn_alias</code></li> <li><code>def store_interaction</code></li> <li><code>def get_last_context</code></li> <li><code>def remember_event</code></li> <li><code>def recall_events</code></li> <li><code>def retrieve_context</code></li> <li><code>def consolidate_memory</code></li> <li>Variables (Est.): 27</li> </ul>"},{"location":"#resourcestoolsdownload_vosk_modelpy","title":"resources/tools/download_vosk_model.py","text":"<ul> <li>L\u00edneas: 180</li> <li>Clases: 0</li> <li>Funciones: 6</li> <li><code>def get_system_resources</code></li> <li><code>def recommend_model</code></li> <li><code>def download_file</code></li> <li><code>def install_model</code></li> <li><code>def update_config</code></li> <li><code>def main</code></li> <li>Variables (Est.): 37</li> </ul>"},{"location":"#modulesdate_parserpy","title":"modules/date_parser.py","text":"<ul> <li>L\u00edneas: 172</li> <li>Clases: 0</li> <li>Funciones: 3</li> <li><code>def parse_reminder_from_text</code></li> <li><code>def _parse_reminder_from_text_original</code></li> <li><code>def parse_alarm_from_text</code></li> <li>Variables (Est.): 52</li> </ul>"},{"location":"#resourcestoolsanalyze_codepy","title":"resources/tools/analyze_code.py","text":"<ul> <li>L\u00edneas: 167</li> <li>Clases: 0</li> <li>Funciones: 4</li> <li><code>def analyze_file</code></li> <li><code>def get_project_tree</code></li> <li><code>def get_requirements</code></li> <li><code>def main</code></li> <li>Variables (Est.): 69</li> <li>TODOs: 1</li> </ul>"},{"location":"#modulesvisionpy","title":"modules/vision.py","text":"<ul> <li>L\u00edneas: 161</li> <li>Clases: 2</li> <li><code>class FaceDB</code></li> <li><code>class VisionManager</code></li> <li>Funciones: 10</li> <li><code>def __init__</code></li> <li><code>def _load_db</code></li> <li><code>def save_db</code></li> <li><code>def add_face</code></li> <li><code>def __init__</code></li> <li><code>def start</code></li> <li><code>def stop</code></li> <li><code>def _detect_motion</code></li> <li><code>def _loop</code></li> <li><code>def _identify_user</code></li> <li>Variables (Est.): 44</li> </ul>"},{"location":"#modulesguardpy","title":"modules/guard.py","text":"<ul> <li>L\u00edneas: 152</li> <li>Clases: 1</li> <li><code>class Guard</code></li> <li>Funciones: 9</li> <li><code>def __init__</code></li> <li><code>def load_signatures</code></li> <li><code>def start</code></li> <li><code>def stop</code></li> <li><code>def monitor_loop</code></li> <li><code>def check_log_signatures</code></li> <li><code>def check_system_signatures</code></li> <li><code>def register_event</code></li> <li><code>def trigger_alert</code></li> <li>Variables (Est.): 33</li> </ul>"},{"location":"#resourcestoolsoptimize_whisperpy","title":"resources/tools/optimize_whisper.py","text":"<ul> <li>L\u00edneas: 150</li> <li>Clases: 0</li> <li>Funciones: 4</li> <li><code>def check_dependencies</code></li> <li><code>def benchmark_model</code></li> <li><code>def main</code></li> <li><code>def update_config</code></li> <li>Variables (Est.): 34</li> </ul>"},{"location":"#resourcesnbbro_agentpy","title":"resources/NB/bro_agent.py","text":"<ul> <li>L\u00edneas: 149</li> <li>Clases: 1</li> <li><code>class BroAgent</code></li> <li>Funciones: 8</li> <li><code>def __init__</code></li> <li><code>def on_connect</code></li> <li><code>def on_message</code></li> <li><code>def handle_command</code></li> <li><code>def perform_status_check</code></li> <li><code>def speak</code></li> <li><code>def proximity_loop</code></li> <li><code>def run</code></li> <li>Variables (Est.): 36</li> </ul>"},{"location":"#modulesspeakerpy","title":"modules/speaker.py","text":"<ul> <li>L\u00edneas: 145</li> <li>Clases: 1</li> <li><code>class Speaker</code></li> <li>Funciones: 6</li> <li><code>def __init__</code></li> <li><code>def _load_config</code></li> <li><code>def _check_engine</code></li> <li><code>def _process_queue</code></li> <li><code>def speak</code></li> <li><code>def is_busy</code></li> <li>Variables (Est.): 38</li> </ul>"},{"location":"#resourcestoolstrain_chatpy","title":"resources/tools/train_chat.py","text":"<ul> <li>L\u00edneas: 137</li> <li>Clases: 0</li> <li>Funciones: 3</li> <li><code>def init_db</code></li> <li><code>def load_data</code></li> <li><code>def train</code></li> <li>Variables (Est.): 35</li> </ul>"},{"location":"#modulesnetworkpy","title":"modules/network.py","text":"<ul> <li>L\u00edneas: 131</li> <li>Clases: 1</li> <li><code>class NetworkManager</code></li> <li>Funciones: 8</li> <li><code>def __init__</code></li> <li><code>def check_dependencies</code></li> <li><code>def run_command</code></li> <li><code>def get_local_ip</code></li> <li><code>def scan_network</code></li> <li><code>def check_host</code></li> <li><code>def whois_lookup</code></li> <li><code>def analyze_security</code></li> <li>Variables (Est.): 27</li> </ul>"},{"location":"#modulesvoice_managerpy","title":"modules/voice_manager.py","text":"<ul> <li>L\u00edneas: 122</li> <li>Clases: 1</li> <li><code>class VoiceManager</code></li> <li>Funciones: 7</li> <li><code>def __init__</code></li> <li><code>def setup_vosk</code></li> <li><code>def get_grammar</code></li> <li><code>def start_listening</code></li> <li><code>def stop_listening</code></li> <li><code>def set_processing</code></li> <li><code>def _continuous_voice_listener</code></li> <li>Variables (Est.): 34</li> </ul>"},{"location":"#modulesssh_managerpy","title":"modules/ssh_manager.py","text":"<ul> <li>L\u00edneas: 119</li> <li>Clases: 1</li> <li><code>class SSHManager</code></li> <li>Funciones: 9</li> <li><code>def __init__</code></li> <li><code>def _load_servers</code></li> <li><code>def _save_servers</code></li> <li><code>def add_server</code></li> <li><code>def remove_server</code></li> <li><code>def connect</code></li> <li><code>def execute</code></li> <li><code>def disconnect</code></li> <li><code>def get_servers_list</code></li> <li>Variables (Est.): 20</li> </ul>"},{"location":"#resourcestoolsseed_knowledgepy","title":"resources/tools/seed_knowledge.py","text":"<ul> <li>L\u00edneas: 112</li> <li>Clases: 0</li> <li>Funciones: 0</li> <li>Variables (Est.): 7</li> </ul>"},{"location":"#resourcesnbbro_bridgepy","title":"resources/NB/bro_bridge.py","text":"<ul> <li>L\u00edneas: 110</li> <li>Clases: 1</li> <li><code>class BroBridge</code></li> <li>Funciones: 9</li> <li><code>def __init__</code></li> <li><code>def on_connect</code></li> <li><code>def on_message</code></li> <li><code>def handle_proximity</code></li> <li><code>def handle_status</code></li> <li><code>def check_theatrical_trigger</code></li> <li><code>def start_conversation</code></li> <li><code>def speak</code></li> <li><code>def run</code></li> <li>Variables (Est.): 27</li> </ul>"},{"location":"#resourcesexperimentsfinetune_tiopy","title":"resources/experiments/finetune_tio.py","text":"<ul> <li>L\u00edneas: 110</li> <li>Clases: 0</li> <li>Funciones: 1</li> <li><code>def format_instruction</code></li> <li>Variables (Est.): 52</li> </ul>"},{"location":"#modulesdashboard_datapy","title":"modules/dashboard_data.py","text":"<ul> <li>L\u00edneas: 99</li> <li>Clases: 1</li> <li><code>class DashboardDataManager</code></li> <li>Funciones: 7</li> <li><code>def __init__</code></li> <li><code>def get_weather</code></li> <li><code>def _get_weather_desc</code></li> <li><code>def get_news</code></li> <li><code>def get_calendar_summary</code></li> <li><code>def get_all_data</code></li> <li><code>def get_calendar_summary_robust</code></li> <li>Variables (Est.): 23</li> </ul>"},{"location":"#modulesskillsorganizerpy","title":"modules/skills/organizer.py","text":"<ul> <li>L\u00edneas: 99</li> <li>Clases: 1</li> <li><code>class OrganizerSkill</code></li> <li>Funciones: 7</li> <li><code>def crear_recordatorio_voz</code></li> <li><code>def crear_alarma_voz</code></li> <li><code>def consultar_recordatorios_dia</code></li> <li><code>def consultar_alarmas</code></li> <li><code>def iniciar_dialogo_temporizador</code></li> <li><code>def consultar_temporizador</code></li> <li><code>def crear_temporizador_directo</code></li> <li>Variables (Est.): 27</li> </ul>"},{"location":"#resourcesnbtest_simulationpy","title":"resources/NB/test_simulation.py","text":"<ul> <li>L\u00edneas: 96</li> <li>Clases: 0</li> <li>Funciones: 3</li> <li><code>def run_bridge</code></li> <li><code>def run_agent</code></li> <li><code>def test_scenario</code></li> <li>Variables (Est.): 19</li> </ul>"},{"location":"#resourcesexperimentsingest_conversationspy","title":"resources/experiments/ingest_conversations.py","text":"<ul> <li>L\u00edneas: 91</li> <li>Clases: 0</li> <li>Funciones: 1</li> <li><code>def ingest_conversations</code></li> <li>Variables (Est.): 21</li> </ul>"},{"location":"#modulesskillssystempy","title":"modules/skills/system.py","text":"<ul> <li>L\u00edneas: 91</li> <li>Clases: 1</li> <li><code>class SystemSkill</code></li> <li>Funciones: 7</li> <li><code>def check_status</code></li> <li><code>def apagar</code></li> <li><code>def diagnostico</code></li> <li><code>def queja_factura</code></li> <li><code>def restart_service</code></li> <li><code>def update_system</code></li> <li><code>def find_file</code></li> <li>Variables (Est.): 15</li> </ul>"},{"location":"#moduleswifi_managerpy","title":"modules/wifi_manager.py","text":"<ul> <li>L\u00edneas: 89</li> <li>Clases: 1</li> <li><code>class WifiManager</code></li> <li>Funciones: 3</li> <li><code>def __init__</code></li> <li><code>def scan</code></li> <li><code>def connect</code></li> <li>Variables (Est.): 15</li> </ul>"},{"location":"#resourcestoolsdownload_big_modelpy","title":"resources/tools/download_big_model.py","text":"<ul> <li>L\u00edneas: 87</li> <li>Clases: 0</li> <li>Funciones: 3</li> <li><code>def download_file</code></li> <li><code>def install_model</code></li> <li><code>def update_config</code></li> <li>Variables (Est.): 23</li> </ul>"},{"location":"#resourcesnbinstall_nbsh","title":"resources/NB/install_nb.sh","text":"<ul> <li>L\u00edneas: 86</li> <li>Clases: 0</li> <li>Funciones: 0</li> <li>Variables (Est.): 19</li> </ul>"},{"location":"#modulesalarmspy","title":"modules/alarms.py","text":"<ul> <li>L\u00edneas: 85</li> <li>Clases: 1</li> <li><code>class AlarmManager</code></li> <li>Funciones: 8</li> <li><code>def __init__</code></li> <li><code>def _load_alarms</code></li> <li><code>def _save_alarms</code></li> <li><code>def add_alarm</code></li> <li><code>def delete_alarm</code></li> <li><code>def get_all_alarms</code></li> <li><code>def get_alarms_summary</code></li> <li><code>def check_alarms</code></li> <li>Variables (Est.): 21</li> </ul>"},{"location":"#moduleschatpy","title":"modules/chat.py","text":"<ul> <li>L\u00edneas: 84</li> <li>Clases: 1</li> <li><code>class ChatManager</code></li> <li>Funciones: 3</li> <li><code>def __init__</code></li> <li><code>def get_response</code></li> <li><code>def reset_context</code></li> <li>Variables (Est.): 26</li> </ul>"},{"location":"#modulescast_managerpy","title":"modules/cast_manager.py","text":"<ul> <li>L\u00edneas: 83</li> <li>Clases: 1</li> <li><code>class CastManager</code></li> <li>Funciones: 5</li> <li><code>def __init__</code></li> <li><code>def start_discovery</code></li> <li><code>def get_devices</code></li> <li><code>def play_media</code></li> <li><code>def stop_media</code></li> <li>Variables (Est.): 11</li> </ul>"},{"location":"#modulesfile_managerpy","title":"modules/file_manager.py","text":"<ul> <li>L\u00edneas: 83</li> <li>Clases: 1</li> <li><code>class FileManager</code></li> <li>Funciones: 5</li> <li><code>def __init__</code></li> <li><code>def list_directory</code></li> <li><code>def read_file</code></li> <li><code>def save_file</code></li> <li><code>def search_files</code></li> <li>Variables (Est.): 10</li> </ul>"},{"location":"#modulesai_enginepy","title":"modules/ai_engine.py","text":"<ul> <li>L\u00edneas: 82</li> <li>Clases: 1</li> <li><code>class GemmaEngine</code></li> <li>Funciones: 3</li> <li><code>def __init__</code></li> <li><code>def load_model</code></li> <li><code>def generate_response</code></li> <li>Variables (Est.): 28</li> </ul>"},{"location":"#resourcestoolsinstall_piperpy","title":"resources/tools/install_piper.py","text":"<ul> <li>L\u00edneas: 81</li> <li>Clases: 0</li> <li>Funciones: 3</li> <li><code>def download_file</code></li> <li><code>def install_piper</code></li> <li><code>def update_config</code></li> <li>Variables (Est.): 21</li> </ul>"},{"location":"#modulessherlockpy","title":"modules/sherlock.py","text":"<ul> <li>L\u00edneas: 81</li> <li>Clases: 1</li> <li><code>class Sherlock</code></li> <li>Funciones: 3</li> <li><code>def __init__</code></li> <li><code>def diagnose</code></li> <li><code>def _run_command</code></li> <li>Variables (Est.): 11</li> </ul>"},{"location":"#modulesskillsmediapy","title":"modules/skills/media.py","text":"<ul> <li>L\u00edneas: 80</li> <li>Clases: 1</li> <li><code>class MediaSkill</code></li> <li>Funciones: 3</li> <li><code>def controlar_radio</code></li> <li><code>def cast_video</code></li> <li><code>def stop_cast</code></li> <li>Variables (Est.): 14</li> </ul>"},{"location":"#modulescalendarpy","title":"modules/calendar.py","text":"<ul> <li>L\u00edneas: 76</li> <li>Clases: 1</li> <li><code>class CalendarManager</code></li> <li>Funciones: 7</li> <li><code>def __init__</code></li> <li><code>def _load_events</code></li> <li><code>def _save_events</code></li> <li><code>def add_event</code></li> <li><code>def get_events_for_month</code></li> <li><code>def get_events_for_day</code></li> <li><code>def get_events_summary_for_day</code></li> <li>Variables (Est.): 20</li> </ul>"},{"location":"#resourcesmnbpizeroagentpy","title":"resources/MNB/PiZero/agent.py","text":"<ul> <li>L\u00edneas: 75</li> <li>Clases: 0</li> <li>Funciones: 4</li> <li><code>def get_cpu_temp</code></li> <li><code>def get_system_stats</code></li> <li><code>def on_connect</code></li> <li><code>def main</code></li> <li>Variables (Est.): 10</li> </ul>"},{"location":"#modulesskillscontentpy","title":"modules/skills/content.py","text":"<ul> <li>L\u00edneas: 75</li> <li>Clases: 1</li> <li><code>class ContentSkill</code></li> <li>Funciones: 5</li> <li><code>def contar_contenido_aleatorio</code></li> <li><code>def decir_frase_celebre</code></li> <li><code>def aprender_alias</code></li> <li><code>def aprender_dato</code></li> <li><code>def consultar_dato</code></li> <li>Variables (Est.): 14</li> </ul>"},{"location":"#resourcesexperimentswhatsapp_to_jsonpy","title":"resources/experiments/whatsapp_to_json.py","text":"<ul> <li>L\u00edneas: 73</li> <li>Clases: 0</li> <li>Funciones: 1</li> <li><code>def parse_whatsapp_chat</code></li> <li>Variables (Est.): 17</li> </ul>"},{"location":"#modulesutilspy","title":"modules/utils.py","text":"<ul> <li>L\u00edneas: 73</li> <li>Clases: 0</li> <li>Funciones: 5</li> <li><code>def load_json_data</code></li> <li><code>def normalize_text</code></li> <li><code>def number_to_text</code></li> <li><code>def py_error_handler</code></li> <li><code>def no_alsa_error</code></li> <li>Variables (Est.): 11</li> </ul>"},{"location":"#resourcesteststest_cortexpy","title":"resources/tests/test_cortex.py","text":"<ul> <li>L\u00edneas: 72</li> <li>Clases: 0</li> <li>Funciones: 0</li> <li>Variables (Est.): 10</li> </ul>"},{"location":"#modulesskillsfilespy","title":"modules/skills/files.py","text":"<ul> <li>L\u00edneas: 72</li> </ul>"},{"location":"core/","title":"Arquitectura del Sistema (WatermelonD v3.0 / Core v4)","text":"<p>Este documento describe la arquitectura interna de WatermelonD con las optimizaciones de la versi\u00f3n 4 del N\u00facleo (<code>WatermelonD</code>).</p>"},{"location":"core/#vision-general","title":"\ufe0f Visi\u00f3n General","text":"<p>WatermelonD sigue una arquitectura modular y orientada a eventos, optimizada para ejecutarse en hardware de recursos limitados (Dual Core CPUs, 8GB RAM).</p>"},{"location":"core/#componentes-principales","title":"Componentes Principales","text":"<ol> <li>WatermelonD (<code>WatermelonD.py</code>):</li> <li>Funci\u00f3n: Orquestador central. Gestiona el ciclo de vida de la aplicaci\u00f3n.</li> <li>Threading: Utiliza hilos ligeros para manejar tareas simult\u00e1neas (Voz, Eventos, Web).</li> <li> <p>V4 Optimization: Implementa un Watchdog interno que supervisa y reinicia hilos cr\u00edticos si fallan, garantizando \"Alta Disponibilidad\" local.</p> </li> <li> <p>Web Admin (<code>modules/web_admin.py</code>):</p> </li> <li>Funci\u00f3n: Servidor API y Web Interface.</li> <li>Tecnolog\u00eda: Flask + Flask-SocketIO.</li> <li> <p>Aislamiento: Se ejecuta en su propio hilo dentro de WatermelonD, sirviendo la UI independientemente del estado de la IA.</p> </li> <li> <p>Managers (Decoupled Modules):</p> </li> <li><code>VoiceManager</code>: Captura de audio y STT (Vosk/Whisper).</li> <li><code>MangoManager</code>: Inferencia de LLM especializado (T5) para comandos Bash. Nota: Limitado a 1 hilo en V4 para no saturar CPU.</li> <li><code>AIEngine</code>: Inferencia de LLM general (Gemma 2B) con <code>llama-cpp-python</code>.</li> <li><code>HealthManager</code>: Monitorizaci\u00f3n de servicios del sistema operativo (cron, docker, etc.).</li> <li>Advanced Modules:</li> <li><code>Guard</code>: IDS basado en reglas y logs.</li> <li><code>CastManager</code>: Gesti\u00f3n de audio multi-habitaci\u00f3n (Google Cast).</li> <li><code>BrainNut</code>: Gesti\u00f3n de memoria epis\u00f3dica y DB (SQLite).</li> </ol>"},{"location":"core/#flujo-de-datos","title":"Flujo de Datos","text":"<ol> <li>Input: El usuario habla -&gt; <code>VoiceManager</code> detecta y transcribe.</li> <li>Routing: <code>WatermelonD.handle_command</code> decide:</li> <li>Es un comando de sistema? -&gt; <code>MangoManager</code> (T5).</li> <li>Es una charla? -&gt; <code>AIEngine</code> (Gemma).</li> <li>Es una orden directa? -&gt; <code>IntentManager</code> (Reglas/Vosk).</li> <li>Ejecuci\u00f3n: El Manager correspondiente ejecuta la acci\u00f3n y devuelve texto.</li> <li>Output: <code>Speaker</code> sintetiza la respuesta (TTS Piper) y <code>WebAdmin</code> actualiza la UI v\u00eda WebSocket.</li> </ol>"},{"location":"core/#optimizaciones-core-v4-hardware-limitado","title":"Optimizaciones Core V4 (Hardware Limitado)","text":"<p>Para funcionar fluidamente en un i3 7th Gen:</p> <ul> <li>PyTorch Single-Thread: Se fuerza a PyTorch (usado por Mango T5) a usar 1 solo hilo f\u00edsico. Esto previene que la inferencia de la IA bloquee el procesamiento de audio en tiempo real.</li> <li>Garbage Collection Forzada: Se llama expl\u00edcitamente al recolector de basura de Python tras la carga de modelos pesados (2GB+) para desfragmentar la RAM.</li> <li>Lazy Loading: M\u00f3dulos pesados como <code>VisionManager</code> (OpenCV) solo se cargan si est\u00e1n habilitados en la configuraci\u00f3n, evitando el consumo de memoria en reposo.</li> </ul>"},{"location":"core/#seguridad","title":"\ufe0f Seguridad","text":"<ul> <li>Web: Cabeceras estrictas (CSP, HSTS) en el servidor interno Flask.</li> <li>Ejecuci\u00f3n: Comandos generados por IA (Mango) pasan por un filtro de riesgo antes de ejecutarse. Comandos destructivos (<code>rm</code>, <code>mkfs</code>) requieren confirmaci\u00f3n de voz expl\u00edcita.</li> </ul>"},{"location":"network/","title":"Network Bros (MNB) - Documentaci\u00f3n Oficial","text":"<p>Network Bros es la iniciativa para extender los sentidos de TIO m\u00e1s all\u00e1 del servidor principal, utilizando microcontroladores y ordenadores de placa reducida (SBC) como agentes sat\u00e9lite.</p>"},{"location":"network/#1-arquitectura","title":"1. Arquitectura","text":"<p>El sistema utiliza una arquitectura h\u00edbrida WiFi (MQTT) + Bluetooth (RFCOMM) para garantizar la comunicaci\u00f3n incluso en entornos inestables.</p>"},{"location":"network/#11-protocolo-de-comunicacion","title":"1.1. Protocolo de Comunicaci\u00f3n","text":"<p>Los agentes env\u00edan mensajes en formato JSON a TIO.</p> <ul> <li>Canal MQTT: <code>tio/agents/{HOSTNAME}/{TYPE}</code></li> <li>Canal Bluetooth: RFCOMM Puerto 1 (Serial)</li> </ul>"},{"location":"network/#12-tipos-de-mensajes-type","title":"1.2. Tipos de Mensajes (<code>TYPE</code>)","text":""},{"location":"network/#a-telemetria-telemetry","title":"A. Telemetr\u00eda (<code>telemetry</code>)","text":"<p>Datos peri\u00f3dicos de estado. TIO muestra una notificaci\u00f3n visual (Pop-up Azul).</p> <pre><code>{\n \"agent\": \"salon_pi\",\n \"type\": \"telemetry\",\n \"data\": {\n \"temp\": 24.5,\n \"humidity\": 60,\n \"cpu\": 15.2,\n \"status\": \"online\"\n }\n}\n</code></pre>"},{"location":"network/#b-alertas-alert","title":"B. Alertas (<code>alert</code>)","text":"<p>Eventos cr\u00edticos. TIO interrumpe, habla por voz y muestra una alerta roja.</p> <pre><code>{\n \"agent\": \"puerta_entrada\",\n \"type\": \"alert\",\n \"data\": {\n \"msg\": \"Movimiento detectado en la entrada\",\n \"level\": \"critical\"\n }\n}\n</code></pre>"},{"location":"network/#2-implementacion-en-tio-servidor","title":"2. Implementaci\u00f3n en TIO (Servidor)","text":"<p>TIO (<code>WatermelonD.py</code>) ejecuta dos gestores en segundo plano:</p> <ol> <li><code>MQTTManager</code>:</li> <li>Se conecta al broker local (Mosquitto).</li> <li>Se suscribe a <code>tio/agents/#</code>.</li> <li> <p>Gestiona la reconexi\u00f3n autom\u00e1tica.</p> </li> <li> <p><code>BluetoothManager</code>:</p> </li> <li>Abre un socket servidor RFCOMM en el Puerto 1.</li> <li>Espera conexiones entrantes de agentes emparejados.</li> <li>Inyecta los mensajes recibidos en la misma cola de eventos que MQTT.</li> </ol>"},{"location":"network/#3-guia-de-despliegue-de-agentes","title":"3. Gu\u00eda de Despliegue de Agentes","text":"<p>El c\u00f3digo fuente de los agentes se encuentra en <code>resources/MNB/</code>.</p>"},{"location":"network/#31-raspberry-pi-zero-python","title":"3.1. Raspberry Pi Zero (Python)","text":"<p>Ideal para agentes con c\u00e1mara o sensores complejos.</p> <p>Requisitos: * Python 3 * Librer\u00edas: <code>paho-mqtt</code>, <code>psutil</code> (opcional: <code>bluez</code> para bluetooth).</p> <p>Instalaci\u00f3n: 1. Copiar <code>resources/MNB/PiZero/agent.py</code> a la Pi. 2. Editar la configuraci\u00f3n (IP del servidor TIO). 3. Ejecutar: <code>python3 agent.py</code>.</p>"},{"location":"network/#32-esp32-micropython","title":"3.2. ESP32 (MicroPython)","text":"<p>Ideal para sensores de bajo consumo (temperatura, puertas).</p> <p>Requisitos: * Firmware MicroPython. * Librer\u00eda <code>umqtt.simple</code>.</p> <p>Instalaci\u00f3n: 1. Flashar MicroPython en el ESP32. 2. Subir <code>resources/MNB/ESP32/boot.py</code> y <code>main.py</code>. 3. Configurar WiFi y Broker IP en <code>main.py</code>.</p>"},{"location":"network/#4-modo-fallback-bluetooth","title":"4. Modo Fallback (Bluetooth)","text":"<p>Si el WiFi falla, los agentes est\u00e1n programados (o deben programarse) para intentar conectar por Bluetooth al servidor TIO.</p> <ol> <li>Escaneo: El agente busca dispositivos Bluetooth cercanos.</li> <li>Conexi\u00f3n: Intenta conectar al servicio RFCOMM en el Puerto 1 de TIO.</li> <li>Env\u00edo: Env\u00eda el mismo JSON que enviar\u00eda por MQTT, seguido de un salto de l\u00ednea (<code>\\n</code>).</li> </ol> <p>Nota: Para que esto funcione, es recomendable emparejar previamente los dispositivos Bluetooth (<code>bluetoothctl pair &lt;MAC_AGENTE&gt;</code>) en el servidor TIO para evitar problemas de permisos, aunque el socket RFCOMM suele aceptar conexiones si est\u00e1 configurado en modo \"Visible\" o \"Discoverable\" temporalmente.</p>"},{"location":"web/","title":"WatermelonD Web Interface (v3.0)","text":"<p>La interfaz web de WatermelonD v3.0 ha sido redise\u00f1ada para ser independiente, robusta y personalizable. Funciona como un cliente separado que se conecta a la API de <code>WatermelonD</code>.</p>"},{"location":"web/#caracteristicas-generales","title":"Caracter\u00edsticas Generales","text":"<ul> <li>Tecnolog\u00eda: HTML5, Bootstrap 5, Vanilla JS (sin frameworks pesados).</li> <li>Tema: \"Cosmic Dark\" con efectos Glassmorphism.</li> <li>Responsive: Adaptada para Escritorio, Tabletas y M\u00f3viles.</li> <li>Independencia: Si el n\u00facleo de la IA (<code>WatermelonD</code>) se reinicia, la interfaz web permanece activa y muestra una pantalla de \"Reconectando...\".</li> </ul>"},{"location":"web/#modulos-principales","title":"\ufe0f M\u00f3dulos Principales","text":""},{"location":"web/#1-dashboard","title":"1. Dashboard (<code>/</code>)","text":"<p>El centro de control principal. - Widgets Personalizables: Puedes arrastrar y soltar las tarjetas (CPU, RAM, Micr\u00f3fono) para ordenarlas a tu gusto. El orden se guarda autom\u00e1ticamente en tu navegador. - Control de Micr\u00f3fono: Activa o desactiva la escucha (\"Stop Listening\") con un clic. - Monitor de Sistema: Visualizaci\u00f3n en tiempo real de CPU, RAM, Temperatura y Disco.</p>"},{"location":"web/#2-terminal-web-terminal","title":"2. Terminal Web (<code>/terminal</code>)","text":"<p>Una consola completa en tu navegador. - Sesiones Persistentes: El historial de comandos se guarda localmente. - Autocompletado: Pulsa <code>Tab</code> para autocompletar nombres de archivos y directorios. - Ejecuci\u00f3n As\u00edncrona: Ejecuta comandos largos (<code>apt upgrade</code>) sin bloquear la interfaz.</p>"},{"location":"web/#3-ajustes-settings","title":"3. Ajustes (<code>/settings</code>)","text":"<p>Configuraci\u00f3n del sistema. - Actualizaciones: Bot\u00f3n para comprobar y descargar la \u00faltima versi\u00f3n de WatermelonD desde GitHub. - Personalizaci\u00f3n: Editor CSS integrado para cambiar colores o estilos. - Preferencias de Voz: Selector de voz TTS (Piper) y modelo de IA. - Acerca de: Informaci\u00f3n detallada de la versi\u00f3n y estado del sistema.</p>"},{"location":"web/#4-sistema-de-notificaciones","title":"4. Sistema de Notificaciones","text":"<p>WatermelonD v2.2 introduce un sistema de notificaciones unificado: - In-App Toasts: Avisos visuales no intrusivos en la esquina inferior derecha. - Desktop Notifications: Si das permiso, WatermelonD te enviar\u00e1 notificaciones nativas a tu escritorio (\u00fatil si tienes la pesta\u00f1a en segundo plano).</p>"},{"location":"web/#monitor-de-conexion","title":"Monitor de Conexi\u00f3n","text":"<p>La interfaz sondea continuamente el estado de <code>WatermelonD</code>. - Online: Todo funciona correctamente. - Offline / Reiniciando: Aparecer\u00e1 un overlay a pantalla completa bloqueando la interacci\u00f3n hasta que el sistema vuelva a estar en l\u00ednea. \u00a1Ya no necesitas refrescar la p\u00e1gina manualmente!</p>"},{"location":"web/#desarrollo","title":"Desarrollo","text":"<p>Los archivos de la interfaz se encuentran en: - <code>TangerineUI/templates/</code>: HTML (Jinja2). - <code>TangerineUI/static/</code>: CSS, JS e im\u00e1genes. - <code>modules/web_admin.py</code>: Servidor Flask (Backend API).</p>"}]}